---
version: 2
title: All in one tasks for checking basic functionality of Kubernetes cluster
subtasks:

- title: Run a single workload with listing existing kubernetes namespaces
  scenario:
    Kubernetes.list_namespaces: {}
  runner:
    constant:
      concurrency: 2
      times: 4

- title: Run a single workload with create/read/delete namespace
  scenario:
    Kubernetes.create_and_delete_namespace: {}
  runner:
    constant:
      concurrency: 2
      times: 4

- title: Run a single workload with create/read/delete pod
  scenario:
    Kubernetes.create_and_delete_pod:
      image: kubernetes/pause
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/read/delete replication controller
  scenario:
    Kubernetes.create_and_delete_replication_controller:
      image: kubernetes/pause
      replicas: 2
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/scale/delete replication controller
  scenario:
    Kubernetes.create_scale_and_delete_replication_controller:
      image: kubernetes/pause
      replicas: 2
      scale_replicas: 3
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/read/delete replicaset
  scenario:
    Kubernetes.create_and_delete_replicaset:
      image: kubernetes/pause
      replicas: 1
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/scale/delete replicaset
  scenario:
    Kubernetes.create_scale_and_delete_replicaset:
      image: kubernetes/pause
      replicas: 1
      scale_replicas: 2
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/read/delete pod with emptyDir volume
  scenario:
    Kubernetes.create_and_delete_pod_with_emptydir_volume:
      image: kubernetes/pause
      mount_path: /opt/check
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/read/check/delete pod with emptyDir volume
  scenario:
    Kubernetes.create_and_delete_pod_with_emptydir_volume:
      image: busybox
      command:
      - sleep
      - "3600"
      mount_path: /opt/check
      check_cmd:
      - ls
      - /opt/check
      error_regexp: No such file
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/read/delete pod with secret volume
  scenario:
    Kubernetes.create_and_delete_pod_with_secret_volume:
      image: busybox
      command:
      - sleep
      - "3600"
      mount_path: /opt/check
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/check/delete pod with secret volume
  scenario:
    Kubernetes.create_and_delete_pod_with_secret_volume:
      image: busybox
      command:
      - sleep
      - "3600"
      mount_path: /opt/check
      check_cmd:
      - ls
      - /opt/check
      error_regexp: No such file
  runner:
    constant:
      concurrency: 2
      times: 4
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/read/delete pod with hostPath volume
  scenario:
    Kubernetes.create_and_delete_pod_with_hostpath_volume:
      image: kubernetes/pause
      mount_path: /opt/check
      volume_type: Directory
      volume_path: /tmp/
  runner:
    constant:
      concurrency: 2
      times: 10
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true

- title: Run a single workload with create/read/check/delete pod with hostPath volume
  scenario:
    Kubernetes.create_and_delete_pod_with_hostpath_volume:
      image: busybox
      command:
      - sleep
      - "3600"
      mount_path: /opt/check
      check_cmd:
      - ls
      - /opt/check
      error_regexp: No such file
      volume_type: Directory
      volume_path: /tmp/
  runner:
    constant:
      concurrency: 2
      times: 10
  contexts:
    namespaces:
      count: 3
      with_serviceaccount: true
